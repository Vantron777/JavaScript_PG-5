import{i as H,a as g}from"./vendor-8cce9181.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const k={openBurgerBtn:document.querySelector(".burger-menu"),closeBurgerBtn:document.querySelector(".mobile-menu__button"),burger:document.querySelector(".mobile-menu-container")};k.openBurgerBtn.addEventListener("click",_);k.closeBurgerBtn.addEventListener("click",_);function _(){k.burger.classList.toggle("is-hidden")}function u(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),document.querySelectorAll('.common-toggle input[type="checkbox"]').forEach(function(t){e==="dark"?t.checked=!0:t.checked=!1})}const x=localStorage.getItem("theme");u(x||"light");const N=document.querySelectorAll('.common-toggle input[type="checkbox"]');N.forEach(function(e){e.addEventListener("change",function(n){n.target.checked?u("dark"):u("light")},!1)});const q=document.querySelector('.toggle-theme input[type="checkbox'),f=localStorage.getItem("theme");f&&(document.documentElement.setAttribute("data-theme",f),f==="dark"&&(q.checked=!0));q.addEventListener("change",P,!1);function P(e){e.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}function A(e){return e.map(t=>{const{_id:o,book_image:r,title:s,author:a}=t;return`<li class="books-box-itm" id="${o}">
      <div class="books-box-wrap">
              <img
                class="books-img"
                src="${r}"
                alt="${s}"
              />
              <div class="books-overlay">
                <a href="#" data-id="${o}" class="books-overlay-text">
                quick view </a>
              </div>
            </div>
            <div class="books-box-desc">
              <p class="books-box-desc-title">${s}</p>
              <p class="books-box-desc-author">${a}</p>
            </div> 
            </li>`}).join("")}const R=(e,n)=>{if(!e||e.length===0){I("Sorry, books not found");return}else return`<h2 class="books-box-title">Best Sellers <span class="books-title-span"> Books</span></h2>${e.map(o=>{const r=o.list_name,s=A(o.books.slice(0,n));return`<div class="books-box-holder">
        <h3 class="books-box-subtitle">${r}</h3>
         <ul class="books-box-list">${s}</ul>
           <button data-categoryName="${r}" class="books-btn-see-more" type="button">see more</button>
      </div>`}).join("")}`},j=e=>` <li class="categories-itm js-categories-current ">
  <a href="#" data-categoryName="all categories">All categories</a></li>${e.sort((t,o)=>t.list_name<o.list_name?-1:t.list_name>o.list_name?1:0).map(t=>`<li class="categories-itm"><a href="#" data-categoryName="${t.list_name}">${t.list_name}</a></li>`).join("")}`,W=(e,n)=>{if(!e||e.length===0){I("Sorry, category of book not found");return}else{const t=A(e),o=n.split(" "),r=o[o.length-1];return`<h2 class="books-box-title">
   ${o.slice(0,-1).join(" ")} 
   <span class="books-title-span">${r}</span>
 </h2>
 <div class="books-category-box">
   <ul class="books-category-list">${t}</ul>
 </div>`}};function I(e){H.error({message:e,messageColor:"white",backgroundColor:"red",position:"topRight"})}const m="https://books-backend.p.goit.global",z=async e=>{const t=m+"/books/top-books/";try{const o=await g.get(t);return R(o.data,e)}catch(o){return console.error("Error fetching top books:",o),""}},U=async()=>{const n=m+"/books/category-list/";try{const t=await g.get(n);return j(t.data)}catch(t){console.error("Error fetching category list:",t)}},D=async e=>{const t=m+"/books/category/",o={category:e};try{const r=await g.get(t,{params:o});return W(r.data,e)}catch(r){console.error("Error fetching books by category:",r)}},K=async e=>{const n=`/books/${e}`,t=m+n;try{return(await g.get(t)).data}catch(o){console.error("Error fetching books id:",o)}},y={default:3,largeScreen:5,smallScreen:1};function w(e){return e>=1440?y.largeScreen:e<768?y.smallScreen:y.default}const F=window.innerWidth;let b=w(F);window.addEventListener("resize",()=>{const e=window.innerWidth;b=w(e)});async function S(){const e=document.querySelector(".categories-list"),n=await U();return e.innerHTML=n,e.addEventListener("click",J),e}async function J(e){e.preventDefault();const n=e.target;if(!n.closest(".categories-itm"))return;const o=n.dataset.categoryname,r=await S();M(r,o),o==="all categories"?O():await $(r,o)}document.addEventListener("click",Y);async function Y(e){if(e.target&&e.target.classList.contains("books-btn-see-more")){const n=e.target.dataset.categoryname;await $(null,n),window.scrollTo({top:0,behavior:"smooth"});const t=await S();M(t,n)}}async function $(e,n){try{const t=document.querySelector(".books-box");if(!t){console.error("Element not found.");return}const o=await D(n);t.innerHTML=o}catch(t){console.error("Error displaying books by category:",t)}finally{}}async function O(){try{const e=document.querySelector(".books-box"),n=window.innerWidth;b=w(n);const o=await z(b);e.innerHTML=o}catch(e){console.error("Error displaying top books:",e)}finally{}}window.addEventListener("load",()=>{O(),S()});function M(e,n){e.querySelectorAll(".categories-itm").forEach(o=>{o.firstElementChild.dataset.categoryname===n?o.classList.add("js-categories-current"):o.classList.remove("js-categories-current")})}const B="addBook";let i;async function G(e){const n=e.target.closest("button");try{if(n.classList.contains("modal-button-shopping-list")){i=JSON.parse(localStorage.getItem(B))||[];const t=await K(n.dataset.id),o=i.some(r=>r._id===t._id);console.log(i,o),o?i=i.filter(r=>r._id!==t._id):i.push(t),localStorage.setItem(B,JSON.stringify(i))}}catch(t){console.log(t.message)}}document.querySelector(".modal-js");const Z=document.querySelector(".backdrop");let Q,V;Z.addEventListener("click",te);function v(){document.body.classList.remove("show-modal"),window.removeEventListener("keydown",oe),Q.removeEventListener("click",X),V.removeEventListener("click",ee)}function X(e){const n="addBook";G(e);const t=e.target.closest("button");if(!t.classList.contains("modal-button-shopping-list"))return;(JSON.parse(localStorage.getItem(n))||[]).some(s=>s._id===t.dataset.id)?t.textContent="Add to shopping list":t.textContent="Remove from shopping list",t.nextElementSibling.classList.toggle("hidden")}function ee(e){v()}function te(e){e.currentTarget===e.target&&v()}function oe(e){console.log(e),e.key==="Escape"&&v()}window.addEventListener("load",()=>{setTimeout(()=>{},350)});document.querySelector(".loader");const L=document.querySelector(".support.container-s");L||console.error("Parent container not found.");let T=0;const ne=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"../img/support/save-the-children.png",resolution:"../img/support/save-the-children@2x.png"},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"../img/support/project-hope.png",resolution:"../img/support/project-hope@2x.png"},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"../img/support/united.png",resolution:"../img/support/united24@2x.png"},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"../img/support/international-medical-corps.png",resolution:"../img/support/international-medical-corps@2x.png"},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"../img/support/medicins-sans-frontieres.png",resolution:"../img/support/medicins-sans-frontieres@2x.png"},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"../img/support/razom.png",resolution:"../img/support/razom@2x.png"},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"../img/support/action-ageinst-hunger.png",resolution:"../img/support/action-against-hunger@2x.png"},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"../img/support/world-vision.png",resolution:"../img/support/world-vision@2x.png"},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"../img/support/sergiy-prytula.png",resolution:"../img/support/serhiy-prytula-charity-foundation@2x.png"}],E=document.createElement("div");E.classList.add("swiper-container");const h=document.createElement("div");h.classList.add("swiper-wrapper");h.id="swiper-wrapper";function re(e){const n=document.createElement("div");n.classList.add("swiper-slide");const t=(T+1).toString().padStart(2,"0"),o=document.createElement("a");o.classList.add("link-s"),o.href=e.url,o.target="_blank";const r=document.createElement("img");r.classList.add("img-s"),r.setAttribute("srcset",`${e.img}, ${e.resolution} 2x`),r.alt=e.title,o.appendChild(r);const s=document.createElement("span");s.classList.add("charity-index"),s.textContent=t,n.appendChild(s),n.appendChild(o),h.appendChild(n),T++}ne.forEach(e=>{re(e)});E.appendChild(h);L.appendChild(E);const C=document.createElement("div");C.classList.add("button-con");const l=document.createElement("label");l.classList.add("container-btn");l.classList.add("btn-s");const c=document.createElement("input");c.setAttribute("type","checkbox");c.checked=!0;c.setAttribute("hidden",!0);const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 512 512");d.setAttribute("height","1em");d.classList.add("chevron-down");d.innerHTML='<path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"></path>';l.appendChild(c);l.appendChild(d);C.appendChild(l);L.appendChild(C);c.addEventListener("change",()=>{const e=document.querySelector(".swiper-wrapper"),n=document.querySelector(".chevron-down");c.checked?n.style.transform="":n.style.transform="rotate(-180deg)",(e.scrollTop<=0?"down":"up")==="down"?e.scrollTop+e.clientHeight>=e.scrollHeight?e.scrollTop-=3*document.querySelector(".swiper-slide").offsetHeight:e.scrollTop+=3*document.querySelector(".swiper-slide").offsetHeight:e.scrollTop<=0?e.scrollTop+=3*document.querySelector(".swiper-slide").offsetHeight:e.scrollTop-=3*document.querySelector(".swiper-slide").offsetHeight});function se(){window.scrollTo({top:0,behavior:"smooth"})}const p=document.querySelector(".top-btn");p.style.display="none";window.addEventListener("scroll",()=>{window.scrollY>window.innerHeight?p.style.display="inline-flex":p.style.display="none"});p.addEventListener("click",se);
//# sourceMappingURL=main-616759ec.js.map
