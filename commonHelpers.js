import{a as $}from"./assets/vendor-0cb09735.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const f={openBurgerBtn:document.querySelector(".burger-menu"),closeBurgerBtn:document.querySelector(".mobile-menu__button"),burger:document.querySelector(".mobile-menu-container")};f.openBurgerBtn.addEventListener("click",L);f.closeBurgerBtn.addEventListener("click",L);function L(){f.burger.classList.toggle("is-hidden")}function l(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),document.querySelectorAll('.common-toggle input[type="checkbox"]').forEach(function(o){e==="dark"?o.checked=!0:o.checked=!1})}const b=localStorage.getItem("theme");l(b||"light");const q=document.querySelectorAll('.common-toggle input[type="checkbox"]');q.forEach(function(e){e.addEventListener("change",function(t){t.target.checked?l("dark"):l("light")},!1)});const S=document.querySelector('.toggle-theme input[type="checkbox'),m=localStorage.getItem("theme");m&&(document.documentElement.setAttribute("data-theme",m),m==="dark"&&(S.checked=!0));S.addEventListener("change",O,!1);function O(e){e.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}function C(e){return e.map(o=>{const{_id:s,book_image:n,title:r,author:c}=o;return`<li class="books-box-itm" id="${s}">
      <div class="books-box-wrap">
              <img
                class="books-img"
                src="${n}"
                alt="${r}"
              />
              <div class="books-overlay">
                <a href="#" data-id="${s}" class="books-overlay-text">
                quick view </a>
              </div>
            </div>
            <div class="books-box-desc">
              <p class="books-box-desc-title">${r}</p>
              <p class="books-box-desc-author">${c}</p>
            </div> 
            </li>`}).join("")}const A=(e,t)=>`<div class="books-container"><h2 class="books-title">Best Sellers Books</h2>${e.map(s=>{const n=s.list_name,r=C(s.books.slice(0,t));return`<div class="books-box-holder">
        <h3 class="books-box-subtitle">${n}</h3>
        <ul class="books-box-list">${r}</ul>
        <button data-categoryName="${n}" class="books-btn-see-more" type="button">see more</button>
      </div>`}).join("")}</div>`,N=e=>`<li class="categories-itm js-categories-current "><a href="#" data-categoryName="">All categories</a></li>${e.map(o=>`<li class="categories-itm"><a href="#" data-categoryName="${o.list_name}">${o.list_name}</a></li>`).join("")}`,I=e=>e.map(o=>{const s=C(o);return`<div class="books-category-box visually-hidden">
      <h2 class="books-box-title">${o.list_name}</h2>
      <ul class="books-category-list">${s}</ul>
    </div>`}).join(""),j="https://books-backend.p.goit.global",u=async(e,t=null)=>{const o=`${j}/books${e}`;try{return(await $.get(o,{params:t})).data}catch(s){console.log(s)}},M=async e=>{const t=await u("/top-books/");return A(t,e)},P=async()=>{const e=await u("/category-list/");return N(e)},R=async(e="")=>{const t=await u("/category/",{category:e});return I(t)},W=async e=>u(`/${e}`),h=document.querySelector(".books-box"),a=document.querySelector(".categories-list"),p={default:3,largeScreen:5,smallScreen:1};async function E(e){h.innerHTML=e;const t=document.querySelector(".books-box-desc-title");t&&D(t)}async function H(){const e=await P();a.innerHTML=e}async function x(){const e=window.innerWidth,t=K(e),o=await M(t);E(o)}async function B(e){const t=await R(e);return E(t)}function D(e){const t=e.textContent.split(" "),o=t.pop(),s=t.join(" ")+(t.length>0?` <span class="books-title-color">${o}</span>`:o);e.innerHTML=s}function K(e){return e>=1440?p.largeScreen:e<768?p.smallScreen:p.default}h&&(x(),H(),a.addEventListener("click",F),h.addEventListener("click",J));function F(e){e.preventDefault();const t=e.target;if(t.tagName==="A"){const o=t.dataset.categoryName;a.querySelector(".js-categories-current").classList.remove("js-categories-current"),t.classList.add("js-categories-current"),o===""?x():B(o)}}function J(e){e.preventDefault();const t=e.target;if(t.classList.contains("books-btn-see-more")){const o=t.dataset.categoryName;a.querySelector(".js-categories-current").classList.remove("js-categories-current"),a.querySelector(`[data-categoryName="${o}"]`).classList.add("js-categories-current"),B(o)}}const w="addBook";let i;async function U(e){const t=e.target.closest("button");try{if(t.classList.contains("modal-button-shopping-list")){i=JSON.parse(localStorage.getItem(w))||[];const o=await W(t.dataset.id),s=i.some(n=>n._id===o._id);console.log(i,s),s?i=i.filter(n=>n._id!==o._id):i.push(o),localStorage.setItem(w,JSON.stringify(i))}}catch(o){console.log(o.message)}}document.querySelector(".modal-js");const Y=document.querySelector(".backdrop");let z,G;Y.addEventListener("click",V);function y(){document.body.classList.remove("show-modal"),window.removeEventListener("keydown",X),z.removeEventListener("click",Z),G.removeEventListener("click",Q)}function Z(e){const t="addBook";U(e);const o=e.target.closest("button");if(!o.classList.contains("modal-button-shopping-list"))return;(JSON.parse(localStorage.getItem(t))||[]).some(r=>r._id===o.dataset.id)?o.textContent="Add to shopping list":o.textContent="Remove from shopping list",o.nextElementSibling.classList.toggle("hidden")}function Q(e){y()}function V(e){e.currentTarget===e.target&&y()}function X(e){console.log(e),e.key==="Escape"&&y()}window.addEventListener("load",()=>{setTimeout(()=>{te()},350)});const T=document.querySelector(".loader");function ee(){T.classList.remove("visually-hidden")}function te(){T.classList.add("visually-hidden")}ee();const _=document.querySelector(".support.container-s");_||console.error("Parent container not found.");const oe=9;let v=0;const ne=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"../img/support/save-the-children@2x.png"},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"../img/support/project-hope@2x.png"},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"../img/support/united24@2x.png"},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"../img/support/international-medical-corps@2x.png"},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"../img/support/medicins-sans-frontieres@2x.png"},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"../img/support/razom@2x.png"},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"../img/support/action-against-hunger@2x.png"},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"../img/support/world-vision@2x.png"},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"../img/support/serhiy-prytula-charity-foundation@2x.png"}],k=document.createElement("div");k.classList.add("swiper-container");const g=document.createElement("div");g.classList.add("swiper-wrapper");g.id="swiper-wrapper";function se(e){const t=document.createElement("div");t.classList.add("swiper-slide");const o=(v+1).toString().padStart(2,"0"),s=document.createElement("a");s.classList.add("link-s"),s.href=e.url,s.target="_blank";const n=document.createElement("img");n.classList.add("img-s"),n.src=e.img,n.alt=e.title,s.appendChild(n),t.appendChild(document.createTextNode(`${o} `)),t.appendChild(s),g.appendChild(t),v++}ne.slice(0,oe).forEach(e=>{se(e)});k.appendChild(g);_.appendChild(k);const re=document.createElement("div");re.classList.add("swiper-button-next");function ie(){window.scrollTo({top:0,behavior:"smooth"})}const d=document.querySelector(".top-btn");d.style.display="none";window.addEventListener("scroll",()=>{window.scrollY>window.innerHeight?d.style.display="inline-flex":d.style.display="none"});d.addEventListener("click",ie);
//# sourceMappingURL=commonHelpers.js.map
